基于SAML的单点登录系统 一
=========================

.. author:: default
.. categories:: 技术
.. tags:: SAML, SSO
.. comments::


前言
----
最近工作中在搭建一个基于SAML的单点登录（Single sign-on）系统，准备把相关的知识总结与此。
由于周围没有有经验的大腿可以抱，所以所有的内容都是我从 Mr.Google 和一些标准文档中整理过来的。
错漏应该是存在的，如果有人愿意提醒，感激不尽。

基本概念
--------

SSO
+++

单点登录，single sign-on，习惯简称为 SSO，是一种针对 **多个相关但独立的系统** 的用户登录和授权的方式。
在 SSO 中，用用户可以通过一套用户名和密码登录多个系统，更进一步，可以无缝登录多个系统。
这儿的无缝登录指的是：当用户在某个系统登录后，其再去访问其它系统中的受限资源时，就不需要在登录，
即通过一次登录，登录了多个系统。

从上面的描述中，我们可以看出 SSO 主要有以下特点：

    - SSO 主要用于有多个相关但独立的系统的情况
    - 对用户而言，SSO 的优点在于：

      + 只需要记录一套账号密码就可以登录多个系统
      + 只需要一次登录就可以登录多个系统
      OAuth 等登录方式也可以实现第一点，所以 SSO 的主要优势在于 **一次登录多个系统** 。
    - SSO 的缺点也很明显：

      + 用户登录一次就对所有资源都有了访问权限，那么用户的权限被误用、盗用的可能性自然也就高了
      + SSO 对稳定性的要求会更高，因为受影响的系统更多

SAML
++++

Web 中一般通过浏览器的 cookies 来维护用户的登录状态，但是 cookies 并不能在不同的域名之间传递。
SSO 需要在多个系统（多个域名）之间共享用户的状态，所以就需要一种机制，在不同的系统之间共享用户的状态。
Security Assertion Markup Language，SAML，就是一种基于XML的标准去在不同的系统之间传递用户的验证、属性和授权信息。

信息交换流程
------------
